import cx from 'clsx';
import { useEffect, useState } from 'react';

export function Transportation2({ isReady = true }) {
  const [isMounted, setIsMounted] = useState(false);

  const config = {
    1: {
      delay: '0.5s',
    },
    2: {
      delay: '0.3s',
    },
    11: {
      delay: '1.8s',
    },
    22: {
      delay: '1.7s',
    },
  };

  const circleProps = (id) => {
    const delay = config[id]?.delay || 0;

    const isActive = isMounted && isReady;

    return {
      className: cx('svg-circle', isActive && 'active'),
      style: {
        '--anim-delay': delay,
      },
    };
  };

  const lineProps = (id, options) => {
    let {
      k = 200,
      array,
      offset,
      to,
      delay = 0,
      duration = '1.5s',
    } = options || {};

    delay = config[id]?.delay || delay;

    return {
      className: cx('svg-line-anim', isReady && 'ready'),
      style: {
        '--dash-array': array || k,
        '--dash-offset': offset || k * 1.25,
        '--dash-to': to || k * 2,
        '--anim-delay': delay,
        '--anim-duration': duration,
      },
    };
  };

  useEffect(() => {
    setIsMounted(true);
  }, []);

  return (
    <svg
      className="run-animation h-full w-full"
      width="146"
      height="137"
      viewBox="0 0 146 137"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="72.6719" cy="68.4795" r="62" stroke="#E4E4E4" />

      <path
        d="M17.9379 97.856C21.8888 104.163 31.4063 107.079 44.3966 105.962C57.387 104.845 72.786 99.7869 87.2063 91.9001C101.626 84.0134 113.887 73.9442 121.29 63.9077C128.692 53.8711 130.632 44.6893 126.681 38.3822"
        stroke="#E4E4E4"
      />
      <path
        d="M116.388 112.402C121.618 107.172 122.033 97.5575 117.543 85.672C113.053 73.7866 104.025 60.6042 92.4459 49.025C80.8666 37.4457 67.6843 28.4181 55.7988 23.928C43.9133 19.4379 34.2984 19.8533 29.069 25.0826"
        stroke="#E4E4E4"
      />
      <path
        d="M76.3133 97.2443C84.3332 93.7464 92.1383 89.4003 99.2046 84.4979C106.271 79.5956 112.435 74.2502 117.283 68.8206C122.131 63.3911 125.551 58.0029 127.314 53.0178C129.076 48.0326 129.14 43.5659 127.501 39.9172C125.863 36.2686 122.559 33.5225 117.813 31.8633C113.066 30.2041 106.986 29.6702 99.9814 30.2973C92.9764 30.9244 85.2082 32.6981 77.1982 35.4993C69.1883 38.3005 61.1218 42.0645 53.5402 46.5385"
        stroke="#E4E4E4"
      ></path>
      <path
        d="M10.7782 72.3537C11.4336 76.1531 13.6929 79.189 17.4012 81.253C21.1094 83.3171 26.1788 84.3605 32.2615 84.3116C38.3443 84.2627 45.2964 83.1227 52.6408 80.9698C59.9852 78.8169 67.5481 75.702 74.8106 71.839"
        stroke="#E4E4E4"
      ></path>
      <path
        {...lineProps(5, {
          array: 400,
          offset: 400,
          to: 325,
          delay: '1.1s',
          // duration: '5s',
        })}
        d="M10.7782 72.3537C11.4336 76.1531 13.6929 79.189 17.4012 81.253C21.1094 83.3171 26.1788 84.3605 32.2615 84.3116C38.3443 84.2627 45.2964 83.1227 52.6408 80.9698C59.9852 78.8169 67.5481 75.702 74.8106 71.839"
        stroke="#19191B"
      />
      <path
        d="M34.8978 117.552C38.1189 120.133 42.8853 121.657 48.8476 122.013C54.8098 122.368 61.8168 121.547 69.3548 119.608C76.8928 117.669 84.7707 114.662 92.4111 110.808C100.051 106.953 107.26 102.349 113.51 97.3321C119.759 92.3153 124.89 87.0134 128.526 81.8151C132.163 76.6167 134.213 71.6537 134.526 67.2898C134.839 62.9259 133.408 59.2718 130.336 56.5954C127.265 53.9189 122.631 52.288 116.775 51.8222"
        stroke="#E4E4E4"
      />
      {/** 1 */}
      <path
        d="M98.0798 55.2895C87.4155 43.1132 74.4307 32.9027 61.982 26.9044C49.5332 20.906 38.6401 19.6111 31.6992 23.3044C24.7582 26.9978 22.3379 35.3769 24.9707 46.5985C27.6035 57.82 35.0738 70.9648 45.738 83.1412"
        stroke="#E4E4E4"
      />
      <path
        {...lineProps(1, { k: 200 })}
        d="M98.0798 55.2895C87.4155 43.1132 74.4307 32.9027 61.982 26.9044C49.5332 20.906 38.6401 19.6111 31.6992 23.3044C24.7582 26.9978 22.3379 35.3769 24.9707 46.5985C27.6035 57.82 35.0738 70.9648 45.738 83.1412"
        stroke="currentColor"
      />
      <circle
        {...circleProps(1)}
        cx="45.6719"
        cy="82.4795"
        r="3"
        fill="currentColor"
      />
      <circle
        {...circleProps(11)}
        cx="97.6719"
        cy="54.4795"
        r="3"
        fill="currentColor"
      />
      {/** 2 */}

      <path
        {...lineProps(2, {
          array: 200,
          offset: 600,
          to: 440,
        })}
        d="M76.3133 97.2443C84.3332 93.7464 92.1383 89.4003 99.2046 84.4979C106.271 79.5956 112.435 74.2502 117.283 68.8206C122.131 63.3911 125.551 58.0029 127.314 53.0178C129.076 48.0326 129.14 43.5659 127.501 39.9172C125.863 36.2686 122.559 33.5225 117.813 31.8633C113.066 30.2041 106.986 29.6702 99.9814 30.2973C92.9764 30.9244 85.2082 32.6981 77.1982 35.4993C69.1883 38.3005 61.1218 42.0645 53.5402 46.5385"
        stroke="#19191B"
      />
      <circle
        {...circleProps(2)}
        cx="75.6719"
        cy="97.4795"
        r="3"
        fill="black"
      />
      <circle
        {...circleProps(22)}
        cx="53.6719"
        cy="46.4795"
        r="3"
        fill="#19191B"
      />

      {/** 3 */}
      <path
        {...lineProps(3, {
          array: 600,
          offset: 600,
          to: 375,
        })}
        d="M134.672 68.4795C134.672 59.1908 132.585 50.0208 128.565 41.6471C124.545 33.2734 118.695 25.9099 111.447 20.1007C104.199 14.2916 95.7382 10.1852 86.6901 8.08504C77.6419 5.98487 68.2376 5.94457 59.1717 7.96712C50.1059 9.98968 41.6104 14.0234 34.313 19.7702C27.0155 25.5171 21.1025 32.8301 17.0109 41.1691C12.9193 49.5081 10.7538 58.6598 10.6742 67.9482C10.5945 77.2365 12.603 86.424 16.551 94.8319"
        stroke="#19191B"
      />
      <circle
        {...circleProps(33)}
        cx="134.672"
        cy="67.4795"
        r="3"
        fill="#19191B"
      />

      {/* <circle cx="75.6719" cy="97.4795" r="3" fill="#19191B" /> */}
    </svg>
  );
}
